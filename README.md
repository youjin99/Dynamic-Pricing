# Dynamic-Pricing

# 대회 소개

**상품 및 서비스 종류, 거리 등에 따른 유동적인 배송 비용 결정 모델 수립** 

# 대회 기간

**2021/10/01 ~ 2021/10/27**

# 제공 데이터
![캡처 PNG](https://user-images.githubusercontent.com/76585610/152686411-f8239a6b-3b3c-4b8d-844d-fd64882c0037.png)

![캡처2 PNG](https://user-images.githubusercontent.com/76585610/152686439-e1e2b0a3-e0a1-4595-a5f0-dd4de32e76d8.png)

![캡처3 PNG](https://user-images.githubusercontent.com/76585610/152686455-a0642f2b-04c8-47c4-9409-7a039c397fc6.png)


- **주문 날짜(BKG_DATE), 주문 시간(BKG_TIME), 주문 금액(INV_AMT), 품목 금액(ITEM_ATM),  송화인 주소(SHPR_ADD), 수화인 주소(CNEE_ADD) 데이터 사용**

# 추가 데이터

- **교통량, 날씨 데이터**

# 과제 수행

### 1. 요인 변수 선정

**1) 주소**

![그림1](https://user-images.githubusercontent.com/76585610/152686476-13ce9f52-d3b0-4dad-b2d7-1d42a5cbb349.png)
![그림2](https://user-images.githubusercontent.com/76585610/152686477-9bf48679-a309-41e3-ad95-70009264cbca.png)


FC데이터의 주소 데이터 시각화 

- 주소는 배송 거리를 나타내는 지표로 dynamic pricing 운임은 배송 거리에 비례한 관계로 산정해야 한다.
- FC 데이터의 주소정보는 송화인과 수화인에 대한 배송지의 데이터가 지역별로 구분되어 있다. 각 지역별 위도와 경도를 구한 뒤, 이를 **Haversine distance**로 나타내었다. FC 데이터의 주소 정보가 **도-시 까지만 구분되어 있어 정확한 거리를 구하는 것이 불가능**하여, **해당 거리 데이터가 실제 배송 거리와 비례관계가 있음을 나타내기 위한 방법**이다.

**2) 주문 시간**

![Untitled](https://user-images.githubusercontent.com/76585610/152686507-0d931db6-be6c-4a69-b790-deb2629719fc.png)

 

- 주문시간은 **서비스 수요의 몰림을 나타내는 지표**로 누적된 주문량에 비례한 관계로 dynamic pricing 운임을 설정한다면, 모델이 택배 서비스 수요의 가격탄력성을 반영할 수 있다.

**3) 교통량**

![Untitled (1)](https://user-images.githubusercontent.com/76585610/152686535-d36883e5-9ba8-4115-a10c-6a493fc4b902.png)


- 모델에 적용할 교통량 데이터는 **배송지역의 교통량에 거리를 가중합**하여 총 배송거리에 대하여 나눈 값으로 전처리 했다.

**4) 날씨**

- FC 데이터의 주문 날짜에 해당하는 날짜별 기상상황을 가져왔다. 비가 오면 1, 비가 오지 않으면 0으로 전처리 하였다.

### 2. 모델 결정 및 생성

- FC데이터에 실제 배송 비용, 산정된 택배 운임과 관련된 데이터가 존재하지 않는다. 이에 따라 지도학습 방식의 택배 운임 산정이 불가능하다고 판단하여 **비지도학습** 모델을 고려하게 되었다. 그 중 **군집화**를 이용하여 전체 데이터를 가격 결정을 달리 할 수 있는 여러 군집으로 나누고자 했다. 모델은 **데이터가 어느 군집에 속하는지 구분하고, 해당 군집에 맞는 요인을 산정하는 것으로 dynamic pricing을 수행**한다.
- **DBSCAN :** K-Means와 계층적 군집화와 달리 DBSCAN은 밀도 기반으로 군집화를 진행하여 불특정한 분포 값들을 처리할 수 있어 DBSCAN을 채택하였다.
![Untitled (2)](https://user-images.githubusercontent.com/76585610/152686543-941871b7-b7f1-4407-a7a5-ab01947c52c8.png)


- 군집화된 그룹별 요소들의 평균을 구한다. **새로운 입력데이터에 대해, 유사도를 측정**하는 것으로 **해당 입력데이터의 predict값을 설정**할 수 있다. 유사도 측정은 **Cosine_Similarity**를 이용하였다. 이를 통해 **입력데이터가 속한 군집을 판단**할 수 있다.

### 3. 프로젝트 결과
![Untitled (3)](https://user-images.githubusercontent.com/76585610/152686552-3e1026db-7397-4d11-a400-d23e347b8d15.png)

- 요소들의 열을 모두 더한 값의 평균인 ‘row_sum’을 구한다. **주문량, 거리, 교통량이 증가함에 따라 배송 비용이 증가한다고 판단**하여 row_sum의 값이 큰 순서로 높은 가격에서 낮은 가격으로 운임을 산정한다.


### 4. 기대효과

- 합리적인 운임을 산정하는 모델을 통해, 개인 소비자 또는 쇼핑몰 운영자에게 합리적인 운임 금액을 제시할 수 있다.
- 개별 고객의 상황에 맞는 개인 맞춤 운임을 결정할 수 있다.
- 실제 배송에 드는 비용과 산정된 택배 운임의 오차를 줄일 수 있다.
